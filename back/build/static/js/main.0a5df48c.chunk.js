(this.webpackJsonpbike_checker=this.webpackJsonpbike_checker||[]).push([[0],{16:function(e,t,a){e.exports=a(41)},21:function(e,t,a){},22:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),u=(a(21),a(3)),i=(a(22),a(2)),s=a.n(i),o=a(4),E={API_URI:"./api"},m=a(15),b=a.n(m),f="".concat(E.API_URI,"/bikeData"),p=0,h={getBikeData:function(){var e=Object(o.a)(s.a.mark((function e(){var t,a,n,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(new Date).valueOf(),6e4,!(p>t-6e4)){e.next=5;break}return console.log("BIKEDATA: TOO SOON TO DO NEW FETCH"),e.abrupt("return",null);case 5:return e.next=7,b.a.get(f);case 7:if(200===(a=e.sent).status&&a.data&&a.data.bikeData){e.next=11;break}return console.log("BIKEDATA: FETCH FAILED",a.status),e.abrupt("return",null);case 11:return n=a.data.bikeData,r=n.lastFetchTime,l=n.stations,p=r,e.abrupt("return",{lastFetchTime:r,stations:l});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},d=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getBikeData();case 2:if((a=e.sent)&&0!==a.lastFetchTime&&0!==a.stations.length){e.next=6;break}return console.log("NO DATA"),e.abrupt("return");case 6:n=a.lastFetchTime,r=a.stations,t({lastFetchTime:n,stations:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.station,a=e.selectCenter,n=t.name,l=(t.stationId,t.bikesAvailable),c=t.spacesAvailable,u=(t.lat,t.lon,l+c),i="".concat(l,"/").concat(u);return r.a.createElement("tr",{onDoubleClick:function(){return a(t)}},r.a.createElement("td",null,n),r.a.createElement("td",null,i))},k=function(e){var t=e.center,a=void 0===t?{name:"NO CENTER SELECTED",bikesAvailable:0,spacesAvailable:0}:t,n=a.name,l=a.bikesAvailable,c=l+a.spacesAvailable,u="".concat(l,"/").concat(c);return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{key:1},r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"BIKES/SPACE"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,u))))},O=function(e){var t=e.center,a=e.setCenter,l=Object(n.useState)({lastFetchTime:0,stations:[]}),c=Object(u.a)(l,2),i=c[0],s=c[1],o=Object(n.useState)(""),E=Object(u.a)(o,2),m=E[0],b=E[1],f=(i.lastFetchTime,i.stations);Object(n.useEffect)((function(){d(s)}),[]);var p=function(e){window.localStorage.setItem("centerStation",JSON.stringify(e)),a(e)},h=m.toLowerCase(),O=f.filter((function(e){return e.name.toLowerCase().includes(h)})).map((function(e){return r.a.createElement(v,{key:e.stationId,station:e,selectCenter:p})}));return r.a.createElement("div",null,r.a.createElement("h2",null,"CENTER STATION"),r.a.createElement(k,{center:t}),r.a.createElement("br",null),r.a.createElement("input",{onChange:function(e){return b(e.target.value)},value:m}),r.a.createElement("br",null),"Select Station as Center with double click",r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{key:1},r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"BIKES/SPACE"))),r.a.createElement("tbody",null,O)))},A=function(){var e=Object(n.useState)((function(){return function(){try{var e=window.localStorage.getItem("centerStation");return e?JSON.parse(e):void 0}catch(t){return}}()})),t=Object(u.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"HELLO WORLD"),r.a.createElement("br",null),r.a.createElement(O,{center:a,setCenter:l}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.0a5df48c.chunk.js.map